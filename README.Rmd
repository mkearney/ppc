---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
options(width = 90)
library(ppc)
```

# ppc

<!-- badges: start -->
[![Travis build status](https://travis-ci.org/mkearney/ppc.svg?branch=master)](https://travis-ci.org/mkearney/ppc)
[![AppVeyor build status](https://ci.appveyor.com/api/projects/status/github/mkearney/ppc?branch=master&svg=true)](https://ci.appveyor.com/project/mkearney/ppc)
<!-- badges: end -->

A simple interface for interacting with [ProPublica's Congress API](https://projects.propublica.org/api-docs/congress-api/), which 
provides data about current and former members of both chambers of the U.S. 
Congress.

## Installation

You can install the released version of ppc from [CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("ppc")
```

And the development version from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
remotes::install_github("mkearney/ppc")
```

## Examples

Get "house" data from the "116"th Congress:

```{r}
## get and preview house data from 116th congress
h116 <- pp_congress(congress = "116", chamber = "house")
h116
```

Get "senate" data from the "110"th Congress:

```{r}
## get and preview senate data from 110th congress
s110 <- pp_congress(congress = "110", chamber = "senate")
s110
```

## API Key

Use of the [ProPublica API](https://projects.propublica.org/api-docs/congress-api/) 
requires a valid key, which you can obtain by completing the form found at the
following URL: https://www.propublica.org/datastore/api/propublica-congress-api

Once you've obtained an API key, you can either include it in every request, e.g.,
``` r
## include API key in request
s116 <- pp_congress(116, "senate", api_key = "as9d78f6aayd9fy2fq378a9ds876fsas89d7f")
```

Or for the duration of any given session, you can set the API key once via the
`pp_api_key()` function

``` r
## set as environment variable for the remainder of current session
pp_api_key("as9d78f6aayd9fy2fq378a9ds876fsas89d7f")
```

If you'd like to set the API key and store it for use in future sessions, use 
`set_renv = TRUE`

``` r
## append as environment variable in user's home .Renviron file
pp_api_key("as9d78f6aayd9fy2fq378a9ds876fsas89d7f", set_renv = TRUE)
```

